<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>schema.coerce documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Schema 0.3.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></div></li><li class="depth-2 branch current"><a href="schema.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-2 branch"><a href="schema.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="schema.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2 branch"><a href="schema.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="schema.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="schema.coerce.html#var-coercer"><div class="inner"><span>coercer</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-CoercionMatcher"><div class="inner"><span>CoercionMatcher</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-edn-read-string"><div class="inner"><span>edn-read-string</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-first-matcher"><div class="inner"><span>first-matcher</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-json-coercion-matcher"><div class="inner"><span>json-coercion-matcher</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-keyword-enum-matcher"><div class="inner"><span>keyword-enum-matcher</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-safe"><div class="inner"><span>safe</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-safe-long-cast"><div class="inner"><span>safe-long-cast</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-Schema"><div class="inner"><span>Schema</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-set-matcher"><div class="inner"><span>set-matcher</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-string-.3Eboolean"><div class="inner"><span>string-&gt;boolean</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-string-.3Ekeyword"><div class="inner"><span>string-&gt;keyword</span></div></a></li><li class="depth-1"><a href="schema.coerce.html#var-string-coercion-matcher"><div class="inner"><span>string-coercion-matcher</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">schema.coerce</h2><div class="doc"><pre class="plaintext">Experimental extension of schema for input coercion (coercing an input to match a schema)
</pre></div><div class="public anchor" id="var-coercer"><h3>coercer</h3><div class="usage"><code>(coercer schema coercion-matcher)</code></div><div class="doc"><pre class="plaintext">Inputs: [schema coercion-matcher :- CoercionMatcher]

Produce a function that simultaneously coerces and validates a datum.</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L25">view source</a></div></div><div class="public anchor" id="var-CoercionMatcher"><h3>CoercionMatcher</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A function from schema to coercion function, or nil if no special coercion is needed.
The returned function is applied to the corresponding data before validation (or walking/
coercion of its sub-schemas, if applicable)</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L19">view source</a></div></div><div class="public anchor" id="var-edn-read-string"><h3>edn-read-string</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Reads one object from a string. Returns nil when string is nil or empty
</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L104">view source</a></div></div><div class="public anchor" id="var-first-matcher"><h3>first-matcher</h3><div class="usage"><code>(first-matcher matchers)</code></div><div class="doc"><pre class="plaintext">Inputs: [matchers :- [CoercionMatcher]]
Returns: CoercionMatcher

A matcher that takes the first match from matchers.</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L46">view source</a></div></div><div class="public anchor" id="var-json-coercion-matcher"><h3>json-coercion-matcher</h3><div class="usage"><code>(json-coercion-matcher schema)</code></div><div class="doc"><pre class="plaintext">A matcher that coerces keywords and keyword enums from strings, and longs and doubles
from numbers on the JVM (without losing precision)</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L96">view source</a></div></div><div class="public anchor" id="var-keyword-enum-matcher"><h3>keyword-enum-matcher</h3><div class="usage"><code>(keyword-enum-matcher schema)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L60">view source</a></div></div><div class="public anchor" id="var-safe"><h3>safe</h3><div class="usage"><code>(safe f)</code></div><div class="doc"><pre class="plaintext">Take a single-arg function f, and return a single-arg function that acts as identity
if f throws an exception, and like f otherwise.  Useful because coercers are not explicitly
guarded for exceptions, and failing to coerce will generally produce a more useful error
in this case.</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L69">view source</a></div></div><div class="public anchor" id="var-safe-long-cast"><h3>safe-long-cast</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Coerce x to a long if this can be done without losing precision, otherwise return x.
</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L77">view source</a></div></div><div class="public anchor" id="var-Schema"><h3>Schema</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A Schema for Schemas
</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L15">view source</a></div></div><div class="public anchor" id="var-set-matcher"><h3>set-matcher</h3><div class="usage"><code>(set-matcher schema)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L65">view source</a></div></div><div class="public anchor" id="var-string-.3Eboolean"><h3>string-&gt;boolean</h3><div class="usage"><code>(string-&gt;boolean s)</code></div><div class="doc"><pre class="plaintext">returns true for strings that are equal, ignoring case, to the string &apos;true&apos;
(following java.lang.Boolean/parseBoolean semantics)</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L54">view source</a></div></div><div class="public anchor" id="var-string-.3Ekeyword"><h3>string-&gt;keyword</h3><div class="usage"><code>(string-&gt;keyword s)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L51">view source</a></div></div><div class="public anchor" id="var-string-coercion-matcher"><h3>string-coercion-matcher</h3><div class="usage"><code>(string-coercion-matcher schema)</code></div><div class="doc"><pre class="plaintext">A matcher that coerces keywords, keyword enums, s/Num and s/Int,
and long and doubles (JVM only) from strings.</pre></div><div class="src-link"><a href="http://github.com/prismatic/schema/blob/master/src/cljx/schema/coerce.cljx#L117">view source</a></div></div></div></body></html>